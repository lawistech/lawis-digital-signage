import{a as V}from"./chunk-KYJZKOBB.js";import{i as $,m as j}from"./chunk-LPDC563P.js";import{$ as b,Cb as L,Eb as S,Na as r,Oa as k,Za as x,ab as g,db as I,eb as f,gb as D,ha as E,hb as N,ia as w,ib as P,jb as t,kb as n,lb as M,mb as T,mc as F,na as h,nb as _,ob as d,ub as i,vb as m,wb as l}from"./chunk-URYE4ZYK.js";var R=a=>["/screens",a];function U(a,p){if(a&1&&(t(0,"div",6)(1,"span",15),i(2,"warning"),n()()),a&2){let e=d();g("title",e.screen.analytics.errors.count+" issues detected")}}function O(a,p){if(a&1&&(t(0,"span",25),i(1),n()),a&2){let e=p.$implicit;r(),l(" ",e," ")}}function B(a,p){if(a&1&&(t(0,"div",21),N(1,O,2,1,"span",25,D),n()),a&2){let e=d(2);r(),P(e.screen.tags)}}function H(a,p){if(a&1){let e=T();t(0,"div",14)(1,"div",9)(2,"span",16)(3,"span",15),i(4,"monitor"),n(),i(5),n(),t(6,"span",17),i(7),n()(),t(8,"div",18)(9,"div")(10,"span",19),i(11,"Resolution"),n(),t(12,"span",20),i(13),n()(),t(14,"div")(15,"span",19),i(16,"Uptime"),n(),t(17,"span",20),i(18),n()(),t(19,"div")(20,"span",19),i(21,"Last Ping"),n(),t(22,"span",20),i(23),n()()(),x(24,B,3,0,"div",21),t(25,"div",22)(26,"button",23),_("click",function(o){E(e);let u=d();return w(u.handleEdit(o))}),t(27,"span",15),i(28,"settings"),n(),i(29," Settings "),n(),t(30,"button",24),i(31," View Details "),n()()()}if(a&2){let e=d();r(5),l(" ",e.screen.channel_name||"No Channel"," "),r(2),m(e.screen.location.building||"No Location"),r(6),m(e.screen.resolution||"Unknown"),r(5),l("",e.screen.analytics.uptime||0,"%"),r(5),m(e.formatDate(e.screen.last_ping)),r(),f(e.screen.tags&&e.screen.tags.length>0?24:-1),r(6),g("routerLink",S(7,R,e.screen.id))}}var Y=(()=>{class a{constructor(e){this.playlistService=e,this.edit=new h,this.viewDetails=new h,this.isExpanded=!1,this.currentPlaylistName=""}ngOnInit(){this.loadPlaylistName()}loadPlaylistName(){this.screen&&this.screen.current_playlist?this.playlistService.getPlaylist(this.screen.current_playlist).subscribe({next:e=>{this.currentPlaylistName=e.name},error:()=>{this.currentPlaylistName="Unknown playlist"}}):this.currentPlaylistName="No playlist assigned"}getStatusColor(){switch(this.screen.status){case"online":return"bg-green-500";case"offline":return"bg-gray-400";case"maintenance":return"bg-yellow-500";case"error":return"bg-red-500";default:return"bg-gray-400"}}formatDate(e){if(!e)return"Never";try{let s=new Date(e),u=new Date().getTime()-s.getTime(),c=Math.floor(u/1e3),v=Math.floor(c/60),y=Math.floor(v/60),C=Math.floor(y/24);return c<60?`${c}s ago`:v<60?`${v}m ago`:y<24?`${y}h ago`:C<7?`${C}d ago`:s.toLocaleDateString()}catch{return"Invalid date"}}toggleExpand(e){e.preventDefault(),e.stopPropagation(),this.isExpanded=!this.isExpanded}handleEdit(e){e.preventDefault(),e.stopPropagation(),this.edit.emit(this.screen)}static{this.\u0275fac=function(s){return new(s||a)(k(V))}}static{this.\u0275cmp=b({type:a,selectors:[["app-screen-card"]],inputs:{screen:"screen"},outputs:{edit:"edit",viewDetails:"viewDetails"},standalone:!0,features:[L],decls:21,vars:11,consts:[[1,"bg-white","rounded-lg","shadow-lg","transition-shadow","duration-200","hover:shadow-xl"],[1,"p-4","cursor-pointer",3,"routerLink"],[1,"flex","items-center","justify-between","mb-2"],[1,"flex","items-center","gap-3"],[1,"font-medium","text-gray-900","truncate","max-w-[200px]"],[1,"flex","items-center","gap-2"],[1,"text-amber-500",3,"title"],[1,"text-gray-400","hover:text-gray-600","transition-colors",3,"click"],[1,"material-icons","text-xl"],[1,"flex","items-center","justify-between","text-sm","text-gray-500","mb-2"],[1,"flex","items-center","gap-1","text-xs"],[1,"flex","items-center","gap-2","text-sm","text-gray-600","bg-blue-50","rounded-md","p-2"],[1,"material-icons","text-blue-500","text-base"],[1,"truncate"],[1,"border-t","border-gray-100","p-4","bg-gray-50","space-y-3","text-sm"],[1,"material-icons","text-base"],[1,"flex","items-center","gap-1"],[1,"text-xs"],[1,"grid","grid-cols-3","gap-4"],[1,"text-gray-500","block"],[1,"font-medium"],[1,"flex","flex-wrap","gap-1"],[1,"flex","justify-end","gap-2","pt-2"],[1,"px-3","py-1","text-gray-600","hover:bg-gray-100","rounded-md","transition-colors","text-xs","font-medium","flex","items-center","gap-1",3,"click"],[1,"px-3","py-1","bg-blue-50","text-blue-600","hover:bg-blue-100","rounded-md","transition-colors","text-xs","font-medium",3,"routerLink"],[1,"px-2","py-1","rounded-full","bg-gray-100","text-gray-600","text-xs"]],template:function(s,o){s&1&&(t(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3),M(4,"div"),t(5,"h3",4),i(6),n()(),t(7,"div",5),x(8,U,3,1,"div",6),t(9,"button",7),_("click",function(c){return o.toggleExpand(c)}),t(10,"span",8),i(11),n()()()(),t(12,"div",9)(13,"span",10),i(14),n()(),t(15,"div",11)(16,"span",12),i(17,"play_circle"),n(),t(18,"span",13),i(19),n()()(),x(20,H,32,9,"div",14),n()),s&2&&(r(),g("routerLink",S(9,R,o.screen.id)),r(3),I("h-2.5 w-2.5 rounded-full "+o.getStatusColor()),r(2),l(" ",o.screen.name," "),r(2),f(o.screen.analytics.errors.count>0?8:-1),r(3),l(" ",o.isExpanded?"expand_less":"chevron_right"," "),r(3),l(" ",o.screen.channel_name||"No Channel"," "),r(5),m(o.currentPlaylistName||"No playlist assigned"),r(),f(o.isExpanded?20:-1))},dependencies:[F,j,$],encapsulation:2})}}return a})();export{Y as a};
