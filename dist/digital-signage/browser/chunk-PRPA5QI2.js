import{b as L,c as d,d as j,e as I,h as N,j as R,k as q,p as D,r as M,t as T}from"./chunk-PCHI4UW3.js";import{a as k}from"./chunk-6VCTTBHM.js";import"./chunk-WBRTOA2C.js";import{f as E,h as C,i as _,m as F}from"./chunk-LPDC563P.js";import{$ as b,Cb as S,Na as a,Oa as s,Za as c,ab as p,eb as m,jb as t,kb as e,lb as u,mc as w,nb as h,ob as f,ub as i,vb as g,wb as y}from"./chunk-URYE4ZYK.js";import"./chunk-X5YLR3NI.js";import"./chunk-ODN5LVDJ.js";function A(r,x){if(r&1&&(t(0,"div",7)(1,"div",28)(2,"div",29)(3,"span",30),i(4,"check_circle"),e()(),t(5,"div",31)(6,"p"),i(7),e()()()()),r&2){let n=f();a(7),g(n.message)}}function G(r,x){if(r&1&&(t(0,"div",8)(1,"div",28)(2,"div",29)(3,"span",32),i(4,"error_outline"),e()(),t(5,"div",31)(6,"p"),i(7),e()()()()),r&2){let n=f();a(7),g(n.error)}}function V(r,x){r&1&&(t(0,"span",20)(1,"span",33),i(2,"refresh"),e()())}var J=(()=>{class r{constructor(n,l,o,v){this.fb=n,this.authService=l,this.router=o,this.route=v,this.loading=!1,this.error=null,this.message=null,this.loginForm=this.fb.group({email:["",[d.required,d.email]],password:["",[d.required,d.minLength(6)]]})}ngOnInit(){this.route.queryParams.subscribe(n=>{this.message=n.message||null;let l=n.returnUrl;l&&this.authService.saveReturnUrl(l)}),this.authService.isAuthenticated()&&this.router.navigate(["/"])}onSubmit(){if(this.loginForm.valid){this.loading=!0,this.error=null;let{email:n,password:l}=this.loginForm.value;this.authService.signIn(n,l).subscribe({next:()=>{},error:o=>{this.error=o.message||"Failed to sign in. Please check your credentials.",this.loading=!1}})}}static{this.\u0275fac=function(l){return new(l||r)(s(M),s(k),s(C),s(E))}}static{this.\u0275cmp=b({type:r,selectors:[["app-login"]],standalone:!0,features:[S],decls:46,vars:6,consts:[[1,"min-h-screen","bg-gradient-to-br","from-blue-50","to-indigo-50","flex","flex-col","justify-center","py-12","sm:px-6","lg:px-8"],[1,"sm:mx-auto","sm:w-full","sm:max-w-md"],[1,"text-center","text-3xl","font-extrabold","text-gray-900"],[1,"mt-2","text-center","text-sm","text-gray-600"],[1,"mt-8","sm:mx-auto","sm:w-full","sm:max-w-md"],[1,"bg-white","py-8","px-4","shadow-2xl","sm:rounded-lg","sm:px-10","transform","transition-all","hover:scale-[1.01]"],[1,"space-y-6",3,"ngSubmit","formGroup"],[1,"bg-green-50","border-l-4","border-green-400","p-4","text-sm","text-green-700"],[1,"bg-red-50","border-l-4","border-red-400","p-4","text-sm","text-red-700"],["for","email",1,"block","text-sm","font-medium","text-gray-700"],[1,"mt-1"],[1,"relative","rounded-md","shadow-sm"],[1,"absolute","inset-y-0","left-0","pl-3","flex","items-center","pointer-events-none"],[1,"material-icons","text-gray-400","text-sm"],["id","email","type","email","formControlName","email","required","","placeholder","Enter your email",1,"pl-10","block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","placeholder-gray-400","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","sm:text-sm"],["for","password",1,"block","text-sm","font-medium","text-gray-700"],["id","password","type","password","formControlName","password","required","","placeholder","Enter your password",1,"pl-10","block","w-full","px-3","py-2","border","border-gray-300","rounded-md","shadow-sm","placeholder-gray-400","focus:outline-none","focus:ring-2","focus:ring-blue-500","focus:border-blue-500","sm:text-sm"],[1,"flex","items-center","justify-end"],["routerLink","/auth/reset-password",1,"text-sm","text-blue-600","hover:text-blue-500","hover:underline"],["type","submit",1,"group","relative","w-full","flex","justify-center","py-2.5","px-4","border","border-transparent","rounded-md","shadow-sm","text-sm","font-medium","text-white","bg-blue-600","hover:bg-blue-700","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500","disabled:opacity-50","disabled:cursor-not-allowed",3,"disabled"],[1,"absolute","left-0","inset-y-0","flex","items-center","pl-3"],[1,"mt-6"],[1,"relative"],[1,"absolute","inset-0","flex","items-center"],[1,"w-full","border-t","border-gray-300"],[1,"relative","flex","justify-center","text-sm"],[1,"px-2","bg-white","text-gray-500"],["routerLink","/auth/register",1,"w-full","flex","justify-center","py-2.5","px-4","border-2","border-gray-300","rounded-md","text-sm","font-medium","text-gray-700","bg-white","hover:bg-gray-50","focus:outline-none","focus:ring-2","focus:ring-offset-2","focus:ring-blue-500"],[1,"flex"],[1,"flex-shrink-0"],[1,"material-icons","text-green-400"],[1,"ml-3"],[1,"material-icons","text-red-400"],[1,"material-icons","animate-spin","text-sm"]],template:function(l,o){l&1&&(t(0,"div",0)(1,"div",1)(2,"h2",2),i(3," Welcome to Digital Signage "),e(),t(4,"p",3),i(5," Sign in to your account "),e()(),t(6,"div",4)(7,"div",5)(8,"form",6),h("ngSubmit",function(){return o.onSubmit()}),c(9,A,8,1,"div",7)(10,G,8,1,"div",8),t(11,"div")(12,"label",9),i(13," Email address "),e(),t(14,"div",10)(15,"div",11)(16,"div",12)(17,"span",13),i(18,"mail"),e()(),u(19,"input",14),e()()(),t(20,"div")(21,"label",15),i(22," Password "),e(),t(23,"div",10)(24,"div",11)(25,"div",12)(26,"span",13),i(27,"lock"),e()(),u(28,"input",16),e()()(),t(29,"div",17)(30,"a",18),i(31," Forgot your password? "),e()(),t(32,"div")(33,"button",19),c(34,V,3,0,"span",20),i(35),e()()(),t(36,"div",21)(37,"div",22)(38,"div",23),u(39,"div",24),e(),t(40,"div",25)(41,"span",26),i(42," New to the platform? "),e()()(),t(43,"div",21)(44,"a",27),i(45," Create an account "),e()()()()()()),l&2&&(a(8),p("formGroup",o.loginForm),a(),m(o.message?9:-1),a(),m(o.error?10:-1),a(23),p("disabled",!o.loginForm.valid||o.loading),a(),m(o.loading?34:-1),a(),y(" ",o.loading?"Signing in...":"Sign in"," "))},dependencies:[w,T,N,L,j,I,D,R,q,F,_],encapsulation:2})}}return r})();export{J as LoginComponent};
