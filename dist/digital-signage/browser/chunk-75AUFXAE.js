import{a as ie,b as ne}from"./chunk-A7DPKMDB.js";import{b as J,d as ee,g as te,s as z}from"./chunk-PCHI4UW3.js";import"./chunk-WBRTOA2C.js";import{$ as w,Ab as X,Cb as M,Ha as S,Hb as P,Jb as I,Ka as H,Na as r,Oa as O,Za as g,ab as f,bb as Q,cb as T,eb as _,gb as F,ha as p,hb as E,hc as q,ia as u,ib as D,jb as n,kb as a,lb as v,lc as $,mb as h,mc as b,na as y,nb as c,ob as s,qb as R,rb as A,sb as W,ub as l,vb as k,wb as x,xb as K,yb as N,zb as Y}from"./chunk-URYE4ZYK.js";import"./chunk-X5YLR3NI.js";import{a as V,b as G,i as U}from"./chunk-ODN5LVDJ.js";var de=(i,m)=>m.id;function me(i,m){if(i&1&&v(0,"img",3),i&2){let e=s().$implicit;f("src",e.url,S)("alt",e.name)}}function ce(i,m){if(i&1&&v(0,"img",3),i&2){let e=s(2).$implicit;f("src",e.thumbnail_url,S)("alt",e.name)}}function pe(i,m){i&1&&(n(0,"span",15),l(1,"movie"),a())}function ue(i,m){if(i&1&&(n(0,"div",16),l(1),a()),i&2){let e=s(2).$implicit,o=s();r(),x(" ",o.formatDuration(e.duration)," ")}}function _e(i,m){if(i&1&&(n(0,"div",4),g(1,ce,1,2,"img",3)(2,pe,2,0,"span",15)(3,ue,2,1,"div",16),a()),i&2){let e=s().$implicit;r(),_(e.thumbnail_url?1:2),r(2),_(e.duration?3:-1)}}function xe(i,m){if(i&1&&(n(0,"span",17),l(1),a()),i&2){let e=m.$implicit;r(),x(" ",e," ")}}function ge(i,m){if(i&1&&(n(0,"span",17),l(1),a()),i&2){let e=s(2).$implicit;r(),x(" +",e.tags.length-2," ")}}function fe(i,m){if(i&1&&(n(0,"div",14),E(1,xe,2,1,"span",17,F),g(3,ge,2,1,"span",17),a()),i&2){let e=s().$implicit;r(),D(e.tags.slice(0,2)),r(2),_(e.tags.length>2?3:-1)}}function he(i,m){if(i&1){let e=h();n(0,"div",1)(1,"div",2),g(2,me,1,2,"img",3)(3,_e,4,2,"div",4),n(4,"div",5)(5,"button",6),c("click",function(){let t=p(e).$implicit,d=s();return u(d.select.emit(t))}),n(6,"span",7),l(7),a()(),n(8,"button",6),c("click",function(){let t=p(e).$implicit,d=s();return u(d.delete.emit(t.id))}),n(9,"span",8),l(10,"delete"),a()()()(),n(11,"div",9)(12,"h3",10),l(13),a(),n(14,"div",11)(15,"p",12),l(16),a(),n(17,"p",13),l(18),P(19,"date"),a()(),g(20,fe,4,1,"div",14),a()()}if(i&2){let e=m.$implicit,o=s();r(2),_(e.type==="image"?2:3),r(5),x(" ",e.type==="image"?"zoom_in":"play_arrow"," "),r(5),f("title",e.name),r(),k(e.name),r(3),x(" ",o.formatFileSize(e.metadata.size)," "),r(2),x(" ",I(19,7,e.created_at,"MMM d, y")," "),r(2),_(e.tags.length?20:-1)}}var oe=(()=>{class i{constructor(){this.media=[],this.select=new y,this.delete=new y}formatFileSize(e){let o=["B","KB","MB","GB"];if(e===0)return"0 B";let t=Math.floor(Math.log(e)/Math.log(1024));return`${(e/Math.pow(1024,t)).toFixed(1)} ${o[t]}`}formatDuration(e){let o=Math.floor(e/60),t=e%60;return`${o}:${t.toString().padStart(2,"0")}`}static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275cmp=w({type:i,selectors:[["app-media-grid"]],inputs:{media:"media"},outputs:{select:"select",delete:"delete"},standalone:!0,features:[M],decls:3,vars:0,consts:[[1,"grid","grid-cols-2","md:grid-cols-3","lg:grid-cols-4","gap-4"],[1,"group","relative","bg-white","rounded-lg","shadow-sm","overflow-hidden","hover:shadow-md","transition-all","duration-300"],[1,"aspect-video","bg-gray-100","relative"],["loading","lazy",1,"w-full","h-full","object-cover",3,"src","alt"],[1,"w-full","h-full","flex","items-center","justify-center"],[1,"absolute","inset-0","bg-black/50","opacity-0","group-hover:opacity-100","transition-opacity","flex","items-center","justify-center","gap-4"],[1,"p-2","bg-white","rounded-full","hover:bg-gray-100","transform","transition-all","duration-300","hover:scale-110",3,"click"],[1,"material-icons","text-blue-600"],[1,"material-icons","text-red-600"],[1,"p-4"],[1,"font-medium","truncate",3,"title"],[1,"flex","items-center","justify-between","mt-1"],[1,"text-sm","text-gray-500"],[1,"text-xs","text-gray-400"],[1,"mt-2","flex","flex-wrap","gap-1"],[1,"material-icons","text-4xl","text-gray-400"],[1,"absolute","bottom-2","right-2","px-2","py-1","bg-black/70","rounded","text-white","text-xs"],[1,"px-2","py-1","bg-gray-100","rounded-full","text-xs","text-gray-600"]],template:function(o,t){o&1&&(n(0,"div",0),E(1,he,21,10,"div",1,de),a()),o&2&&(r(),D(t.media))},dependencies:[b,$],encapsulation:2})}}return i})();function Ce(i,m){if(i&1){let e=h();n(0,"label",4)(1,"input",5),c("change",function(){let t=p(e).$implicit,d=s();return u(d.toggleType(t))}),a(),n(2,"span",6),l(3),a()()}if(i&2){let e=m.$implicit,o=s();r(),f("checked",o.isTypeSelected(e)),r(2),k(e)}}var ae=(()=>{class i{constructor(){this.filterChange=new y,this.mediaTypes=["image","video","document"],this.dateRange={start:"",end:""}}isTypeSelected(e){return this.filters.type.includes(e)}toggleType(e){let o=this.filters.type.indexOf(e);o===-1?this.filters.type.push(e):this.filters.type.splice(o,1),this.updateFilters()}updateFilters(){this.filterChange.emit(G(V({},this.filters),{dateRange:this.dateRange}))}static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275cmp=w({type:i,selectors:[["app-media-filter"]],inputs:{filters:"filters"},outputs:{filterChange:"filterChange"},standalone:!0,features:[M],decls:8,vars:0,consts:[[1,"bg-white","rounded-lg","shadow-sm","p-4"],[1,"flex","flex-wrap","gap-4"],[1,"block","text-sm","font-medium","text-gray-700","mb-1"],[1,"flex","gap-2"],[1,"inline-flex","items-center"],["type","checkbox",1,"rounded","border-gray-300","text-blue-600","shadow-sm","focus:border-blue-300","focus:ring","focus:ring-blue-200","focus:ring-opacity-50",3,"change","checked"],[1,"ml-2","text-sm","text-gray-700"]],template:function(o,t){o&1&&(n(0,"div",0)(1,"div",1)(2,"div")(3,"label",2),l(4,"Type"),a(),n(5,"div",3),E(6,Ce,4,2,"label",4,F),a()()()()),o&2&&(r(6),D(t.mediaTypes))},dependencies:[b,z],encapsulation:2})}}return i})();var ve=["videoPlayer"];function we(i,m){i&1&&(n(0,"div",2),v(1,"div",17),a())}function ye(i,m){if(i&1){let e=h();n(0,"img",18),c("click",function(t){p(e);let d=s();return u(d.handleContentClick(t))})("wheel",function(t){p(e);let d=s();return u(d.handleWheel(t))})("load",function(){p(e);let t=s();return u(t.onMediaLoaded())})("error",function(){p(e);let t=s();return u(t.onMediaError())}),a()}if(i&2){let e=s();Q("transform",e.getTransform()),T("cursor-zoom-in",!e.isZoomed)("cursor-zoom-out",e.isZoomed),f("src",e.media.url,S)("alt",e.media.name)}}function Me(i,m){if(i&1){let e=h();n(0,"video",19,0),c("loadedmetadata",function(){p(e);let t=s();return u(t.onMediaLoaded())})("error",function(){p(e);let t=s();return u(t.onMediaError())}),a()}if(i&2){let e=s();f("src",e.media.url,S)}}function be(i,m){if(i&1){let e=h();n(0,"button",20),c("click",function(){p(e);let t=s();return u(t.zoomOut())}),n(1,"span",8),l(2,"remove"),a()(),n(3,"span",21),l(4),a(),n(5,"button",22),c("click",function(){p(e);let t=s();return u(t.zoomIn())}),n(6,"span",8),l(7,"add"),a()(),v(8,"div",9),n(9,"button",23),c("click",function(){p(e);let t=s();return u(t.resetView())}),n(10,"span",8),l(11,"restart_alt"),a()()}if(i&2){let e=s();f("disabled",e.scale<=1),r(4),x(" ",e.Math.round(e.scale*100),"% "),r(),f("disabled",e.scale>=e.maxZoom),r(4),f("disabled",!e.isTransformed)}}function Se(i,m){if(i&1){let e=h();n(0,"div",11)(1,"div",24)(2,"span",25),l(3,"error_outline"),a(),n(4,"p"),l(5,"Failed to load media"),a(),n(6,"button",26),c("click",function(){p(e);let t=s();return u(t.retryLoad())}),l(7," Retry "),a()()()}}function Te(i,m){if(i&1&&l(0),i&2){let e=s(2);K(" ",e.media.metadata.width,"\xD7",e.media.metadata.height," \u2022 ")}}function Ee(i,m){if(i&1&&(g(0,Te,1,2),l(1)),i&2){let e=s();_(e.media.metadata.width&&e.media.metadata.height?0:-1),r(),x(" ",e.formatFileSize(e.media.metadata.size)," ")}}function De(i,m){if(i&1&&l(0),i&2){let e=s();x(" ",e.formatFileSize(e.media.metadata.size)," ")}}function ke(i,m){i&1&&(n(0,"p",16),l(1," Scroll to zoom \u2022 Drag to pan \u2022 Double-click to reset "),a())}var re=(()=>{class i{constructor(){this.close=new y,this.scale=1,this.maxZoom=4,this.position={x:0,y:0},this.isZoomed=!1,this.isLoading=!0,this.hasError=!1,this.isClosing=!1,this.showControls=!0,this.isHovering=!1,this.isFullscreen=!1,this.Math=Math,this.isDragging=!1,this.isDraggable=!1,this.dragStart={x:0,y:0}}ngAfterViewInit(){if(this.media.type==="video"&&this.videoPlayer){let e=this.videoPlayer.nativeElement.play();e!==void 0&&e.catch(o=>{console.log("Autoplay prevented:",o)})}this.resetControlsTimer()}handleKeyDown(e){switch(e.key){case"Escape":this.initiateClose();break;case"f":case"F":this.toggleFullscreen();break;case"r":case"R":this.resetView();break;case"+":case"=":this.zoomIn();break;case"-":case"_":this.zoomOut();break}}onMouseMove(){this.showControls=!0,this.resetControlsTimer()}startDrag(e){this.scale>1&&(this.isDragging=!0,this.dragStart={x:e.clientX-this.position.x,y:e.clientY-this.position.y},e.preventDefault())}handleDrag(e){this.isDragging&&(this.position={x:e.clientX-this.dragStart.x,y:e.clientY-this.dragStart.y},e.preventDefault())}stopDrag(){this.isDragging=!1}handleContentClick(e){this.isDragging||this.toggleZoom(e)}handleWheel(e){e.preventDefault();let o=e.currentTarget,t=-Math.sign(e.deltaY)*.25,d=Math.max(1,Math.min(this.maxZoom,this.scale+t));if(d!==this.scale){let C=o.getBoundingClientRect(),L=e.clientX-C.left,j=e.clientY-C.top,Z=d/this.scale;this.position={x:L-(L-this.position.x)*Z,y:j-(j-this.position.y)*Z},this.scale=d,this.isZoomed=this.scale>1,this.isDraggable=this.isZoomed}}handleBackdropClick(e){e.target===e.currentTarget&&this.initiateClose()}onMediaLoaded(){this.isLoading=!1,this.hasError=!1}onMediaError(){this.isLoading=!1,this.hasError=!0}retryLoad(){this.isLoading=!0,this.hasError=!1,this.media.type==="video"&&this.videoPlayer&&this.videoPlayer.nativeElement.load()}toggleZoom(e){e.stopPropagation(),this.isZoomed?this.resetView():(this.scale=2,this.isZoomed=!0,this.isDraggable=!0)}zoomIn(){this.scale=Math.min(this.scale+.5,this.maxZoom),this.isZoomed=this.scale>1,this.isDraggable=this.isZoomed}zoomOut(){this.scale=Math.max(this.scale-.5,1),this.isZoomed=this.scale>1,this.isDraggable=this.isZoomed,this.scale===1&&(this.position={x:0,y:0})}resetView(){this.scale=1,this.position={x:0,y:0},this.isZoomed=!1,this.isDraggable=!1}toggleFullscreen(){this.isFullscreen=!this.isFullscreen,this.isFullscreen?document.documentElement.requestFullscreen():document.exitFullscreen()}getTransform(){return`translate(${this.position.x}px, ${this.position.y}px) scale(${this.scale})`}get isTransformed(){return this.scale!==1||this.position.x!==0||this.position.y!==0}formatFileSize(e){if(!e)return"";let o=["B","KB","MB","GB"],t=Math.floor(Math.log(e)/Math.log(1024));return`${Math.round(e/Math.pow(1024,t))} ${o[t]}`}formatDuration(e){if(!e)return"";let o=Math.floor(e/60),t=Math.floor(e%60);return`${o}:${t.toString().padStart(2,"0")}`}resetControlsTimer(){this.controlsTimeout&&window.clearTimeout(this.controlsTimeout),this.controlsTimeout=window.setTimeout(()=>{this.isHovering||(this.showControls=!1)},3e3)}initiateClose(){this.isClosing=!0,setTimeout(()=>{this.close.emit()},200)}ngOnDestroy(){this.controlsTimeout&&window.clearTimeout(this.controlsTimeout),this.isFullscreen&&document.exitFullscreen().catch(()=>{})}static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275cmp=w({type:i,selectors:[["app-media-preview-dialog"]],viewQuery:function(o,t){if(o&1&&R(ve,5),o&2){let d;A(d=W())&&(t.videoPlayer=d.first)}},hostBindings:function(o,t){o&1&&c("keydown",function(C){return t.handleKeyDown(C)},!1,H)("mousemove",function(){return t.onMouseMove()})},inputs:{media:"media"},outputs:{close:"close"},standalone:!0,features:[M],decls:24,vars:23,consts:[["videoPlayer",""],[1,"fixed","inset-0","bg-black/95","z-50","flex","items-center","justify-center","transition-opacity","duration-200",3,"click"],[1,"absolute","inset-0","flex","items-center","justify-center"],[1,"relative","max-w-[95vw]","max-h-[95vh]","overflow-hidden","rounded-lg",3,"mousedown","mousemove","mouseup","mouseleave"],["draggable","false",1,"max-w-full","max-h-full","object-contain","transition-transform","duration-200",3,"src","alt","cursor-zoom-in","cursor-zoom-out","transform"],["controls","","autoplay","","playsinline","",1,"max-w-full","max-h-full","bg-black",3,"src"],[1,"absolute","top-4","left-1/2","transform","-translate-x-1/2","flex","items-center","gap-2","bg-black/50","backdrop-blur-sm","rounded-full","px-4","py-2","transition-opacity","duration-200"],["title","Close (Esc)",1,"p-2","text-white/70","hover:text-white","rounded-full","hover:bg-white/10","transition-colors",3,"click"],[1,"material-icons"],[1,"w-px","h-6","bg-white/20"],["title","Toggle Fullscreen (F)",1,"p-2","text-white/70","hover:text-white","rounded-full","hover:bg-white/10","transition-colors",3,"click"],[1,"absolute","inset-0","flex","items-center","justify-center","bg-black/50"],[1,"absolute","bottom-0","left-0","right-0","bg-black/50","backdrop-blur-sm","p-4","transition-transform","duration-200",3,"mouseenter","mouseleave"],[1,"flex","items-start","justify-between"],[1,"text-white","font-medium"],[1,"text-white/70","text-sm","mt-1"],[1,"text-white/50","text-sm"],[1,"animate-spin","rounded-full","h-12","w-12","border-b-2","border-white"],["draggable","false",1,"max-w-full","max-h-full","object-contain","transition-transform","duration-200",3,"click","wheel","load","error","src","alt"],["controls","","autoplay","","playsinline","",1,"max-w-full","max-h-full","bg-black",3,"loadedmetadata","error","src"],["title","Zoom Out (-)",1,"p-2","text-white/70","hover:text-white","rounded-full","hover:bg-white/10","transition-colors",3,"click","disabled"],[1,"text-white/90","min-w-[4rem]","text-center","text-sm"],["title","Zoom In (+)",1,"p-2","text-white/70","hover:text-white","rounded-full","hover:bg-white/10","transition-colors",3,"click","disabled"],["title","Reset View (R)",1,"p-2","text-white/70","hover:text-white","rounded-full","hover:bg-white/10","transition-colors",3,"click","disabled"],[1,"text-center","text-white"],[1,"material-icons","text-4xl","mb-2"],[1,"mt-4","px-4","py-2","bg-white/10","hover:bg-white/20","rounded-lg","transition-colors",3,"click"]],template:function(o,t){o&1&&(n(0,"div",1),c("click",function(C){return t.handleBackdropClick(C)}),g(1,we,2,0,"div",2),n(2,"div",3),c("mousedown",function(C){return t.startDrag(C)})("mousemove",function(C){return t.handleDrag(C)})("mouseup",function(){return t.stopDrag()})("mouseleave",function(){return t.stopDrag()}),g(3,ye,1,8,"img",4)(4,Me,2,1,"video",5),n(5,"div",6)(6,"button",7),c("click",function(){return t.initiateClose()}),n(7,"span",8),l(8,"close"),a()(),v(9,"div",9),g(10,be,12,4),n(11,"button",10),c("click",function(){return t.toggleFullscreen()}),n(12,"span",8),l(13),a()()(),g(14,Se,8,0,"div",11),n(15,"div",12),c("mouseenter",function(){return t.isHovering=!0})("mouseleave",function(){return t.isHovering=!1}),n(16,"div",13)(17,"div")(18,"h3",14),l(19),a(),n(20,"p",15),g(21,Ee,2,2)(22,De,1,1),a()(),g(23,ke,2,0,"p",16),a()()()()),o&2&&(T("opacity-0",t.isClosing)("opacity-100",!t.isClosing),r(),_(t.isLoading?1:-1),r(),T("cursor-grab",t.isDraggable&&!t.isDragging)("cursor-grabbing",t.isDragging),r(),_(t.media.type==="image"?3:-1),r(),_(t.media.type==="video"?4:-1),r(),T("opacity-0",!t.showControls&&!t.isHovering)("opacity-100",t.showControls||t.isHovering),r(5),_(t.media.type==="image"?10:-1),r(3),x(" ",t.isFullscreen?"fullscreen_exit":"fullscreen"," "),r(),_(t.hasError?14:-1),r(),T("translate-y-full",!t.showControls&&!t.isHovering),r(4),k(t.media.name),r(2),_(t.media.type==="image"?21:22),r(2),_(t.media.type==="image"?23:-1))},dependencies:[b],styles:["[_nghost-%COMP%]{display:block}.material-icons[_ngcontent-%COMP%]{font-size:20px;line-height:1;display:block}"]})}}return i})();var Fe=(i,m)=>m.id;function Ve(i,m){if(i&1){let e=h();n(0,"img",21),c("click",function(){p(e);let t=s().$implicit,d=s();return u(d.select.emit(t))}),a()}if(i&2){let e=s().$implicit;f("src",e.url,S)("alt",e.name)}}function Pe(i,m){if(i&1&&v(0,"img",23),i&2){let e=s(2).$implicit;f("src",e.thumbnail_url,S)("alt",e.name)}}function Ie(i,m){if(i&1){let e=h();n(0,"div",22),c("click",function(){p(e);let t=s().$implicit,d=s();return u(d.select.emit(t))}),g(1,Pe,1,2,"img",23),n(2,"div",24)(3,"span",25),l(4,"play_arrow"),a()()()}if(i&2){let e=s().$implicit;r(),_(e.thumbnail_url?1:-1)}}function $e(i,m){if(i&1&&(n(0,"span",26),l(1),a()),i&2){let e=m.$implicit;r(),x(" ",e," ")}}function ze(i,m){if(i&1&&(n(0,"span",26),l(1),a()),i&2){let e=s(2).$implicit;r(),x(" +",e.tags.length-2," ")}}function Be(i,m){if(i&1&&(n(0,"div",14),E(1,$e,2,1,"span",26,F),g(3,ze,2,1,"span",26),a()),i&2){let e=s().$implicit;r(),D(e.tags.slice(0,2)),r(2),_(e.tags.length>2?3:-1)}}function Le(i,m){if(i&1){let e=h();n(0,"tr",6)(1,"td",7)(2,"div",8)(3,"div",9),g(4,Ve,1,2,"img",10)(5,Ie,5,1,"div",11),a(),n(6,"div",12)(7,"div",13),l(8),a(),g(9,Be,4,1,"div",14),a()()(),n(10,"td",7)(11,"span",15),l(12),a()(),n(13,"td",16),l(14),a(),n(15,"td",16),l(16),a(),n(17,"td",16),l(18),P(19,"date"),a(),n(20,"td",17)(21,"button",18),c("click",function(){let t=p(e).$implicit,d=s();return u(d.select.emit(t))}),n(22,"span",19),l(23),a()(),n(24,"button",20),c("click",function(){let t=p(e).$implicit,d=s();return u(d.delete.emit(t.id))}),n(25,"span",19),l(26,"delete"),a()()()()}if(i&2){let e=m.$implicit,o=s();r(4),_(e.type==="image"?4:e.type==="video"?5:-1),r(4),x(" ",e.name," "),r(),_(e.tags.length?9:-1),r(2),f("ngClass",e.type==="image"?"bg-blue-100 text-blue-800":"bg-purple-100 text-purple-800"),r(),x(" ",e.type," "),r(2),x(" ",o.formatFileSize(e.metadata.size)," "),r(2),x(" ",e.duration?o.formatDuration(e.duration):"-"," "),r(2),x(" ",I(19,9,e.created_at,"medium")," "),r(5),x(" ",e.type==="image"?"zoom_in":"play_circle"," ")}}var le=(()=>{class i{constructor(){this.media=[],this.select=new y,this.delete=new y}formatFileSize(e){if(!e)return"-";let o=["Bytes","KB","MB","GB"];if(e===0)return"0 Bytes";let t=Math.floor(Math.log(e)/Math.log(1024));return`${Math.round(e/Math.pow(1024,t))} ${o[t]}`}formatDuration(e){let o=Math.floor(e/60),t=e%60;return`${o}:${t.toString().padStart(2,"0")}`}static{this.\u0275fac=function(o){return new(o||i)}}static{this.\u0275cmp=w({type:i,selectors:[["app-media-list"]],inputs:{media:"media"},outputs:{select:"select",delete:"delete"},standalone:!0,features:[M],decls:19,vars:0,consts:[[1,"bg-white","rounded-lg","shadow","overflow-hidden"],[1,"min-w-full","divide-y","divide-gray-200"],[1,"bg-gray-50"],["scope","col",1,"px-6","py-3","text-left","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],["scope","col",1,"px-6","py-3","text-right","text-xs","font-medium","text-gray-500","uppercase","tracking-wider"],[1,"bg-white","divide-y","divide-gray-200"],[1,"hover:bg-gray-50"],[1,"px-6","py-4","whitespace-nowrap"],[1,"flex","items-center"],[1,"flex-shrink-0","h-10","w-10","relative","rounded","overflow-hidden"],[1,"h-10","w-10","object-cover","cursor-pointer",3,"src","alt"],[1,"h-10","w-10","bg-gray-100","flex","items-center","justify-center","cursor-pointer","group"],[1,"ml-4"],[1,"text-sm","font-medium","text-gray-900","max-w-xs","truncate"],[1,"flex","gap-1","mt-1"],[1,"inline-flex","items-center","px-2.5","py-0.5","rounded-full","text-xs","font-medium",3,"ngClass"],[1,"px-6","py-4","whitespace-nowrap","text-sm","text-gray-500"],[1,"px-6","py-4","whitespace-nowrap","text-right","text-sm","font-medium"],["title","Preview",1,"text-blue-600","hover:text-blue-900","mx-2",3,"click"],[1,"material-icons"],["title","Delete",1,"text-red-600","hover:text-red-900",3,"click"],[1,"h-10","w-10","object-cover","cursor-pointer",3,"click","src","alt"],[1,"h-10","w-10","bg-gray-100","flex","items-center","justify-center","cursor-pointer","group",3,"click"],[1,"h-10","w-10","object-cover",3,"src","alt"],[1,"absolute","inset-0","bg-black/50","opacity-0","group-hover:opacity-100","flex","items-center","justify-center","transition-opacity"],[1,"material-icons","text-white"],[1,"inline-flex","items-center","px-2","py-0.5","rounded","text-xs","font-medium","bg-gray-100","text-gray-800"]],template:function(o,t){o&1&&(n(0,"div",0)(1,"table",1)(2,"thead",2)(3,"tr")(4,"th",3),l(5," Media "),a(),n(6,"th",3),l(7," Type "),a(),n(8,"th",3),l(9," Size "),a(),n(10,"th",3),l(11," Duration "),a(),n(12,"th",3),l(13," Upload Date "),a(),n(14,"th",4),l(15," Actions "),a()()(),n(16,"tbody",5),E(17,Le,27,12,"tr",6,Fe),a()()()),o&2&&(r(17),D(t.media))},dependencies:[b,q,$],encapsulation:2})}}return i})();function je(i,m){i&1&&(n(0,"div",18)(1,"div",20),v(2,"div",21),a()())}function Ze(i,m){if(i&1&&(n(0,"div",18)(1,"div",22)(2,"span",23),l(3,"error"),a(),n(4,"p",24),l(5),a()()()),i&2){let e=s();r(5),k(e.error)}}function Ge(i,m){i&1&&(n(0,"div",25)(1,"span",26),l(2,"photo_library"),a(),n(3,"h3",27),l(4,"No media found"),a(),n(5,"p",28),l(6,"Upload media files to get started"),a()())}function Ue(i,m){if(i&1){let e=h();n(0,"app-media-grid",29),c("select",function(t){p(e);let d=s(3);return u(d.onMediaSelect(t))})("delete",function(t){p(e);let d=s(3);return u(d.onMediaDelete(t))}),a()}if(i&2){let e=s(3);f("media",e.mediaItems)}}function He(i,m){if(i&1){let e=h();n(0,"app-media-list",29),c("select",function(t){p(e);let d=s(3);return u(d.onMediaSelect(t))})("delete",function(t){p(e);let d=s(3);return u(d.onMediaDelete(t))}),a()}if(i&2){let e=s(3);f("media",e.mediaItems)}}function Oe(i,m){if(i&1&&g(0,Ue,1,1,"app-media-grid",19)(1,He,1,1,"app-media-list",19),i&2){let e=s(2);_(e.viewMode==="grid"?0:1)}}function Qe(i,m){if(i&1&&(n(0,"div",18),g(1,Ge,7,0,"div",25)(2,Oe,2,1),a()),i&2){let e=s();r(),_(e.mediaItems.length===0?1:2)}}function Re(i,m){if(i&1){let e=h();n(0,"app-media-upload",30),c("uploadComplete",function(t){p(e);let d=s();return u(d.onUploadComplete(t))})("cancel",function(){p(e);let t=s();return u(t.showUploadDialog=!1)}),a()}}function Ae(i,m){if(i&1){let e=h();n(0,"app-media-preview-dialog",31),c("close",function(){p(e);let t=s();return u(t.selectedMedia=null)}),a()}if(i&2){let e=s();f("media",e.selectedMedia)}}var Ft=(()=>{class i{constructor(e){this.mediaService=e,this.mediaItems=[],this.loading=!0,this.error=null,this.viewMode="grid",this.showUploadDialog=!1,this.searchQuery="",this.selectedMedia=null,this.filters={type:[],tags:[]}}ngOnInit(){this.loadMedia()}onSelect(e){console.log("Selected media:",e),this.selectedMedia=e}loadMedia(){this.loading=!0,this.error=null,this.mediaService.getMedia(this.getActiveFilters()).subscribe({next:e=>{this.mediaItems=e,this.loading=!1},error:e=>{this.error="Failed to load media. Please try again.",this.loading=!1,console.error("Error loading media:",e)}})}getActiveFilters(){let e=V({},this.filters);return this.searchQuery&&(e.search=this.searchQuery),e}onFilterChange(e){this.filters=e,this.loadMedia()}applyFilters(){this.loadMedia()}onMediaSelect(e){console.log("Selected media:",e),this.selectedMedia=e}onMediaDelete(e){return U(this,null,function*(){if(confirm("Are you sure you want to delete this media?"))try{yield this.mediaService.deleteMedia(e),this.mediaItems=this.mediaItems.filter(o=>o.id!==e)}catch(o){console.error("Error deleting media:",o),alert("Failed to delete media. Please try again.")}})}onUploadComplete(e){this.showUploadDialog=!1,this.mediaItems=[...e,...this.mediaItems]}static{this.\u0275fac=function(o){return new(o||i)(O(ie))}}static{this.\u0275cmp=w({type:i,selectors:[["app-media"]],standalone:!0,features:[M],decls:34,vars:16,consts:[[1,"min-h-screen","bg-gray-50"],[1,"max-w-7xl","mx-auto","bg-white","rounded-xl","shadow-sm","p-6","mb-6"],[1,"flex","flex-col","md:flex-row","justify-between","items-start","md:items-center","gap-4"],[1,"text-2xl","font-semibold","text-gray-900"],[1,"mt-1","text-sm","text-gray-500"],[1,"flex","flex-col","sm:flex-row","w-full","md:w-auto","gap-3"],[1,"relative","flex-grow","sm:max-w-xs"],["type","text","placeholder","Search media...",1,"w-full","pl-10","pr-4","py-2","border","border-gray-200","rounded-lg","text-sm","focus:outline-none","focus:ring-2","focus:ring-blue-100","focus:border-blue-200","transition-colors",3,"ngModelChange","ngModel"],[1,"material-icons","absolute","left-3","top-2.5","text-gray-400","text-sm"],[1,"flex","items-center","justify-center","px-4","py-2","bg-blue-50","text-blue-600","rounded-lg","hover:bg-blue-100","transition-colors","text-sm","font-medium","shadow-lg",3,"click"],[1,"material-icons","text-sm","mr-2"],[1,"max-w-7xl","mx-auto","mb-6"],[3,"filterChange","filters"],[1,"max-w-7xl","mx-auto","mb-6","flex","justify-between","items-center"],[1,"text-xl","text-gray-500","p-2"],[1,"flex","items-center","space-x-2"],[1,"p-2","rounded-lg",3,"click"],[1,"material-icons"],[1,"max-w-7xl","mx-auto"],[3,"media"],[1,"flex","justify-center","items-center","py-12"],[1,"animate-spin","rounded-full","h-8","w-8","border-b-2","border-blue-600"],[1,"bg-red-50","border","border-red-200","rounded-lg","p-4","flex","items-center"],[1,"material-icons","text-red-500","mr-2"],[1,"text-red-700"],[1,"bg-white","rounded-xl","p-8","text-center"],[1,"material-icons","text-4xl","text-gray-400","mb-2"],[1,"text-lg","font-medium","text-gray-900","mb-1"],[1,"text-gray-500"],[3,"select","delete","media"],[3,"uploadComplete","cancel"],[3,"close","media"]],template:function(o,t){o&1&&(n(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h1",3),l(5,"Media Library"),a(),n(6,"p",4),l(7," Manage your media assets for digital signage "),a()(),n(8,"div",5)(9,"div",6)(10,"input",7),X("ngModelChange",function(C){return Y(t.searchQuery,C)||(t.searchQuery=C),C}),c("ngModelChange",function(){return t.applyFilters()}),a(),n(11,"span",8),l(12," search "),a()(),n(13,"button",9),c("click",function(){return t.showUploadDialog=!0}),n(14,"span",10),l(15,"upload"),a(),l(16," Upload Media "),a()()()(),n(17,"div",11)(18,"app-media-filter",12),c("filterChange",function(C){return t.onFilterChange(C)}),a()(),n(19,"div",13)(20,"div",14),l(21),a(),n(22,"div",15)(23,"button",16),c("click",function(){return t.viewMode="grid"}),n(24,"span",17),l(25,"grid_view"),a()(),n(26,"button",16),c("click",function(){return t.viewMode="list"}),n(27,"span",17),l(28,"view_list"),a()()()(),g(29,je,3,0,"div",18)(30,Ze,6,1,"div",18)(31,Qe,3,1,"div",18)(32,Re,1,0,"app-media-upload")(33,Ae,1,1,"app-media-preview-dialog",19),a()),o&2&&(r(10),N("ngModel",t.searchQuery),r(8),f("filters",t.filters),r(3),x(" ",t.mediaItems.length," items "),r(2),T("bg-blue-50",t.viewMode==="grid")("text-blue-600",t.viewMode==="grid"),r(3),T("bg-blue-50",t.viewMode==="list")("text-blue-600",t.viewMode==="list"),r(3),_(t.loading?29:-1),r(),_(t.error?30:-1),r(),_(!t.loading&&!t.error?31:-1),r(),_(t.showUploadDialog?32:-1),r(),_(t.selectedMedia?33:-1))},dependencies:[b,z,J,ee,te,ne,oe,ae,re,le],encapsulation:2})}}return i})();export{Ft as MediaComponent};
