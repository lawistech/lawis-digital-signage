import{a as it}from"./chunk-EOWXEQSV.js";import{a as V}from"./chunk-KYJZKOBB.js";import{b as F,c as B,d as k,e as W,g as H,h as J,j as K,k as X,p as Y,r as Z,s as tt,t as et}from"./chunk-PCHI4UW3.js";import"./chunk-WBRTOA2C.js";import{h as G,m as M}from"./chunk-LPDC563P.js";import{$ as x,Ab as z,Cb as P,Db as q,F as R,Ha as N,Na as r,Oa as v,Za as y,ab as g,bb as I,eb as p,gb as A,ha as _,hb as w,ia as h,ib as b,jb as l,kb as a,lb as u,mb as D,mc as S,na as C,nb as c,ob as d,ub as o,vb as E,wb as T,yb as U,zb as Q}from"./chunk-URYE4ZYK.js";import"./chunk-X5YLR3NI.js";import{a as L,b as O}from"./chunk-ODN5LVDJ.js";var lt=(e,s)=>s.id;function rt(e,s){if(e&1&&(u(0,"img",21),l(1,"div",22),o(2),a()),e&2){let t=d().$implicit,i=d();g("src",t.content.thumbnail,N)("alt",t.name),r(2),T(" ",i.formatDuration(t.duration)," ")}}function st(e,s){if(e&1&&u(0,"img",21),e&2){let t=d().$implicit;g("src",t.content.url,N)("alt",t.name)}}function dt(e,s){if(e&1&&(l(0,"div",4)(1,"span",23),o(2),a()()),e&2){let t=d().$implicit,i=d();r(2),E(i.getItemIcon(t.type))}}function mt(e,s){if(e&1&&(l(0,"div",20),y(1,rt,3,3)(2,st,1,2,"img",21)(3,dt,3,1,"div",4),a()),e&2){let t=s.$implicit,i=d();I("opacity",i.currentIndex===i.playlist.items.indexOf(t)?"1":"0"),r(),p(t.type==="video"&&t.content.thumbnail?1:t.type==="image"?2:3)}}function pt(e,s){e&1&&(l(0,"div",4)(1,"span",23),o(2,"playlist_play"),a()())}function ct(e,s){if(e&1&&u(0,"div",25),e&2){let t=s.$implicit,i=d(2);I("background-color",i.currentIndex===i.playlist.items.indexOf(t)?"rgb(255, 255, 255)":"rgba(255, 255, 255, 0.5)")}}function ut(e,s){if(e&1&&(l(0,"div",5),w(1,ct,1,2,"div",24,lt),a()),e&2){let t=d();r(),b(t.playlist.items)}}var at=(()=>{class e{constructor(){this.preview=new C,this.edit=new C,this.currentIndex=0,this.SLIDE_DURATION=3e3}ngOnInit(){this.currentIndex=0}ngOnDestroy(){this.stopSlideshow()}startSlideshow(){this.playlist.items.length<=1||(this.stopSlideshow(),this.slideshowInterval=setInterval(()=>{this.currentIndex=(this.currentIndex+1)%this.playlist.items.length},this.SLIDE_DURATION))}stopSlideshow(){this.slideshowInterval&&(clearInterval(this.slideshowInterval),this.slideshowInterval=null)}onPreview(t){t.stopPropagation(),this.preview.emit(this.playlist)}onEdit(t){t.stopPropagation(),this.edit.emit(this.playlist)}getItemIcon(t){switch(t){case"video":return"movie";case"image":return"image";case"webpage":return"web";default:return"insert_drive_file"}}getStatusBackgroundColor(t){switch(t){case"active":return"#10B981";case"draft":return"#6B7280";case"archived":return"#F59E0B";default:return"#6B7280"}}formatDuration(t){let i=Math.floor(t/3600),n=Math.floor(t%3600/60);return i>0?`${i}h ${n}m`:`${n}m`}static{this.\u0275fac=function(i){return new(i||e)}}static{this.\u0275cmp=x({type:e,selectors:[["app-playlist-card"]],inputs:{playlist:"playlist"},outputs:{preview:"preview",edit:"edit"},standalone:!0,features:[P],decls:33,vars:8,consts:[[1,"group","relative","bg-white","rounded-xl","shadow-lg","hover:shadow-xl","transition-all","duration-300",3,"mouseenter","mouseleave"],[1,"relative","h-48","rounded-t-xl","overflow-hidden"],[1,"relative","w-full","h-full"],[1,"absolute","inset-0","transition-opacity","duration-500",3,"opacity"],[1,"w-full","h-full","flex","items-center","justify-center","bg-gray-100"],[1,"absolute","bottom-2","left-2","flex","gap-1"],[1,"absolute","inset-0","bg-black/50","opacity-0","group-hover:opacity-100","transition-opacity","duration-300","flex","items-center","justify-center","gap-4"],[1,"p-3","bg-white","rounded-full","hover:bg-blue-50","transition-all","duration-300",3,"click"],[1,"material-icons","text-blue-600"],[1,"absolute","top-3","left-3"],[1,"px-3","py-1","text-xs","font-medium","rounded-full","text-white","shadow-sm"],[1,"absolute","top-3","right-3"],[1,"px-3","py-1","text-xs","font-medium","bg-black/70","text-white","rounded-full"],[1,"p-5","space-y-4"],[1,"grid","grid-cols-2","gap-3"],[1,"text-sm","text-gray-500","line-clamp-2"],[1,"flex","items-center","gap-2","p-2","bg-blue-50","rounded-lg"],[1,"material-icons","text-gray-400"],[1,"text-xs","text-gray-500"],[1,"text-sm","font-medium"],[1,"absolute","inset-0","transition-opacity","duration-500"],[1,"w-full","h-full","object-cover",3,"src","alt"],[1,"absolute","bottom-2","right-2","px-2","py-1","bg-black/70","rounded","text-white","text-xs"],[1,"material-icons","text-4xl","text-gray-400"],[1,"w-1.5","h-1.5","rounded-full","transition-all","duration-300",3,"background-color"],[1,"w-1.5","h-1.5","rounded-full","transition-all","duration-300"]],template:function(i,n){i&1&&(l(0,"div",0),c("mouseenter",function(){return n.startSlideshow()})("mouseleave",function(){return n.stopSlideshow()}),l(1,"div",1)(2,"div",2),w(3,mt,4,3,"div",3,lt),y(5,pt,3,0,"div",4)(6,ut,3,0,"div",5),a(),l(7,"div",6)(8,"button",7),c("click",function(){return n.preview.emit(n.playlist)}),l(9,"span",8),o(10,"play_arrow"),a()(),l(11,"button",7),c("click",function(){return n.edit.emit(n.playlist)}),l(12,"span",8),o(13,"edit"),a()()(),l(14,"div",9)(15,"span",10),o(16),a()(),l(17,"div",11)(18,"span",12),o(19),a()()(),l(20,"div",13)(21,"div",14)(22,"div")(23,"p",15),o(24),a()(),l(25,"div",16)(26,"span",17),o(27,"video_library"),a(),l(28,"div")(29,"p",18),o(30,"Items"),a(),l(31,"p",19),o(32),a()()()()()()),i&2&&(r(3),b(n.playlist.items),r(2),p(n.playlist.items.length?-1:5),r(),p(n.playlist.items.length>1?6:-1),r(9),I("background-color",n.getStatusBackgroundColor(n.playlist.status)),r(),T(" ",n.playlist.status," "),r(3),T(" ",n.formatDuration(n.playlist.duration)," "),r(5),T(" ",n.playlist.name," "),r(8),E(n.playlist.items.length))},dependencies:[S,M],encapsulation:2})}}return e})();function ft(e,s){e&1&&(l(0,"span",12),o(1,"refresh"),a())}function _t(e,s){e&1&&o(0," Create ")}var ot=(()=>{class e{constructor(t,i){this.fb=t,this.playlistService=i,this.onCreate=new C,this.onCancel=new C,this.isSubmitting=!1,this.playlistForm=this.fb.group({name:["",[B.required,B.minLength(3)]],description:[""],duration:[10],visibility:["public"],autoPlay:[!0]})}handleSubmit(){this.playlistForm.valid&&!this.isSubmitting&&(this.isSubmitting=!0,this.playlistService.createPlaylist(O(L({},this.playlistForm.value),{settings:{autoPlay:this.playlistForm.value.autoPlay,defaultDuration:this.playlistForm.value.duration,loop:!1,defaultMuted:!0,transition:{type:"fade",duration:.5},scheduling:{enabled:!1,priority:1}}})).subscribe({next:()=>{this.isSubmitting=!1,this.onCreate.emit()},error:t=>{console.error("Error creating playlist:",t),this.isSubmitting=!1}}))}static{this.\u0275fac=function(i){return new(i||e)(v(Z),v(V))}}static{this.\u0275cmp=x({type:e,selectors:[["app-create-playlist-dialog"]],outputs:{onCreate:"onCreate",onCancel:"onCancel"},standalone:!0,features:[P],decls:18,vars:3,consts:[[1,"fixed","inset-0","bg-black/30","backdrop-blur-sm","flex","items-center","justify-center","z-50"],[1,"w-full","max-w-md","p-6","bg-white","rounded","shadow-xl"],[1,"flex","justify-between","items-center","mb-6"],[1,"text-xl","font-medium","text-gray-900"],[1,"text-gray-400","hover:text-gray-600","transition-colors",3,"click"],[1,"material-icons"],[1,"space-y-5",3,"ngSubmit","formGroup"],["type","text","formControlName","name","placeholder","Playlist name","required","",1,"w-full","px-4","py-3","bg-gray-50","border-0","rounded-lg","focus:ring-2","focus:ring-blue-500","text-lg","font-medium","placeholder:text-gray-400","shadow-md"],["formControlName","description","placeholder","Add description (optional)","rows","2",1,"w-full","px-4","py-3","bg-gray-50","border-0","rounded-lg","focus:ring-2","focus:ring-blue-500","resize-none","text-gray-600","shadow-md"],[1,"pt-4","flex","justify-end","gap-3"],["type","button",1,"px-6","py-2","text-gray-600","hover:bg-gray-50","rounded-lg","transition-colors",3,"click"],["type","submit",1,"px-6","py-2","bg-blue-500","text-white","rounded-lg","hover:bg-blue-600","disabled:opacity-50","disabled:cursor-not-allowed","transition-colors","flex","items-center","gap-2",3,"disabled"],[1,"material-icons","animate-spin","text-sm"]],template:function(i,n){i&1&&(l(0,"div",0)(1,"div",1)(2,"div",2)(3,"h2",3),o(4,"New Playlist"),a(),l(5,"button",4),c("click",function(){return n.onCancel.emit()}),l(6,"span",5),o(7,"close"),a()()(),l(8,"form",6),c("ngSubmit",function(){return n.handleSubmit()}),l(9,"div"),u(10,"input",7),a(),u(11,"textarea",8),l(12,"div",9)(13,"button",10),c("click",function(){return n.onCancel.emit()}),o(14," Cancel "),a(),l(15,"button",11),y(16,ft,2,0,"span",12)(17,_t,1,0),a()()()()()),i&2&&(r(8),g("formGroup",n.playlistForm),r(7),g("disabled",!n.playlistForm.valid||n.isSubmitting),r(),p(n.isSubmitting?16:17))},dependencies:[S,et,J,F,k,W,Y,K,X],encapsulation:2})}}return e})();var ht=(e,s)=>s.id,xt=()=>[1,2,3,4,5,6];function Ct(e,s){e&1&&(l(0,"div",14),u(1,"div",15),l(2,"div",16),u(3,"div",17),l(4,"div",18),u(5,"div",19)(6,"div",19),a()()())}function vt(e,s){e&1&&(l(0,"div",11)(1,"div",13),w(2,Ct,7,0,"div",14,A),a()()),e&2&&(r(2),b(q(0,xt)))}function wt(e,s){if(e&1){let t=D();l(0,"div",11)(1,"div",20)(2,"span",21),o(3,"error_outline"),a(),l(4,"h3",22),o(5,"Failed to load playlists"),a(),l(6,"p",23),o(7),a(),l(8,"button",24),c("click",function(){_(t);let n=d();return h(n.loadPlaylists())}),o(9," Try Again "),a()()()}if(e&2){let t=d();r(7),E(t.error)}}function bt(e,s){e&1&&(l(0,"p",28),o(1,"Try adjusting your search criteria"),a())}function Pt(e,s){e&1&&(l(0,"p",28),o(1,"Create your first playlist to get started"),a())}function St(e,s){if(e&1&&(l(0,"div",11)(1,"div",25)(2,"span",26),o(3,"playlist_add"),a(),l(4,"h3",27),o(5,"No playlists found"),a(),y(6,bt,2,0,"p",28)(7,Pt,2,0,"p",28),a()()),e&2){let t=d(2);r(6),p(t.searchQuery?6:7)}}function Dt(e,s){if(e&1){let t=D();l(0,"app-playlist-card",29),c("preview",function(n){_(t);let m=d(3);return h(m.previewPlaylist(n))})("edit",function(n){_(t);let m=d(3);return h(m.editPlaylist(n))}),a()}if(e&2){let t=s.$implicit;g("playlist",t)}}function Et(e,s){if(e&1&&(l(0,"div",11)(1,"div",13),w(2,Dt,1,1,"app-playlist-card",12,ht),a()()),e&2){let t=d(2);r(2),b(t.filteredPlaylists)}}function Tt(e,s){if(e&1&&y(0,St,8,1,"div",11)(1,Et,4,0,"div",11),e&2){let t=d();p(t.filteredPlaylists.length===0?0:1)}}function It(e,s){if(e&1){let t=D();l(0,"app-create-playlist-dialog",30),c("onCreate",function(){_(t);let n=d();return h(n.loadPlaylists())})("onCancel",function(){_(t);let n=d();return h(n.showCreateDialog=!1)}),a()}}function Mt(e,s){if(e&1){let t=D();l(0,"app-playlist-preview-dialog",31),c("closeDialog",function(){_(t);let n=d();return h(n.closePreviewDialog())}),a()}if(e&2){let t=d();g("playlist",t.selectedPlaylist)}}var te=(()=>{class e{constructor(t,i){this.playlistService=t,this.router=i,this.playlists=[],this.loading=!0,this.error=null,this.searchQuery="",this.showCreateDialog=!1,this.showPreviewDialog=!1,this.selectedPlaylist=null,this.stats={totalPlaylists:0,activePlaylists:0,totalDuration:0,lastUpdated:""}}ngOnInit(){this.loadPlaylists()}loadPlaylists(){this.loading=!0,this.error=null,this.playlistService.getPlaylists().pipe(R(()=>{this.loading=!1})).subscribe({next:t=>{this.playlists=t,this.updateStats()},error:t=>{console.error("Error loading playlists:",t),this.error="Failed to load playlists. Please try again."}})}updateStats(){this.stats={totalPlaylists:this.playlists.length,activePlaylists:this.playlists.filter(t=>t.status==="active").length,totalDuration:this.playlists.reduce((t,i)=>t+i.duration,0),lastUpdated:this.getLastUpdatedDate()}}getLastUpdatedDate(){if(this.playlists.length===0)return"-";let t=this.playlists.map(n=>new Date(n.lastModified));return new Date(Math.max(...t.map(n=>n.getTime()))).toLocaleDateString()}get filteredPlaylists(){let t=this.searchQuery.toLowerCase();return this.playlists.filter(i=>i.name.toLowerCase().includes(t)||i.description?.toLowerCase().includes(t)||i.tags?.some(n=>n.toLowerCase().includes(t)))}get activePlaylists(){return this.playlists.filter(t=>t.status==="active").length}get totalDuration(){return this.playlists.reduce((t,i)=>t+i.duration,0)}formatDuration(t){let i=Math.floor(t/3600),n=Math.floor(t%3600/60);return i>0?`${i}h ${n}m`:`${n}m`}createPlaylist(){this.showCreateDialog=!0}handleCreatePlaylist(t){this.loadPlaylists(),this.showCreateDialog=!1}previewPlaylist(t){this.selectedPlaylist=t,this.showPreviewDialog=!0}editPlaylist(t){this.router.navigate(["/playlists",t.id])}deletePlaylist(t){confirm(`Are you sure you want to delete "${t.name}"?`)&&this.playlistService.deletePlaylist(t.id).subscribe({next:()=>{this.playlists=this.playlists.filter(i=>i.id!==t.id),this.updateStats()},error:i=>{console.error("Error deleting playlist:",i)}})}closePreviewDialog(){this.showPreviewDialog=!1,this.selectedPlaylist=null}getPlaylistTypeIcon(t){switch(t){case"active":return"play_circle";case"draft":return"edit_note";case"archived":return"archive";default:return"playlist_play"}}getStatusColor(t){switch(t){case"active":return"bg-green-500";case"draft":return"bg-gray-500";case"archived":return"bg-yellow-500";default:return"bg-gray-400"}}handleError(t){console.error("Error:",t)}getTimeAgo(t){let i=new Date,n=new Date(t),m=Math.floor((i.getTime()-n.getTime())/1e3);if(m<60)return"just now";let f=Math.floor(m/60);if(f<60)return`${f}m ago`;let $=Math.floor(f/60);if($<24)return`${$}h ago`;let j=Math.floor($/24);return j<30?`${j}d ago`:`${Math.floor(j/30)}mo ago`}sortByName(){this.playlists.sort((t,i)=>t.name.localeCompare(i.name))}sortByDate(){this.playlists.sort((t,i)=>new Date(i.lastModified).getTime()-new Date(t.lastModified).getTime())}sortByStatus(){this.playlists.sort((t,i)=>t.status.localeCompare(i.status))}filterByStatus(t){this.playlists=this.playlists.filter(i=>i.status===t)}resetFilters(){this.loadPlaylists(),this.searchQuery=""}static{this.\u0275fac=function(i){return new(i||e)(v(V),v(G))}}static{this.\u0275cmp=x({type:e,selectors:[["app-playlists"]],standalone:!0,features:[P],decls:22,vars:6,consts:[[1,"min-h-screen","bg-gray-50"],[1,"max-w-7xl","mx-auto","bg-white","rounded-xl","shadow-sm","p-6","mb-6"],[1,"flex","flex-col","md:flex-row","justify-between","items-start","md:items-center","gap-4"],[1,"text-2xl","font-semibold","text-gray-900"],[1,"mt-1","text-sm","text-gray-500"],[1,"flex","flex-col","sm:flex-row","w-full","md:w-auto","gap-3"],[1,"relative","flex-grow","sm:max-w-xs"],["type","text","placeholder","Search playlists...",1,"w-full","pl-10","pr-4","py-2","border","border-gray-200","rounded-lg","text-sm","focus:outline-none","focus:ring-2","focus:ring-blue-100","focus:border-blue-200","transition-colors",3,"ngModelChange","ngModel"],[1,"material-icons","absolute","left-3","top-2.5","text-gray-400","text-sm"],[1,"flex","items-center","justify-center","px-4","py-2","bg-blue-50","text-blue-600","rounded-lg","hover:bg-blue-100","transition-colors","text-sm","font-medium","shadow-lg",3,"click"],[1,"material-icons","text-sm","mr-2"],[1,"max-w-7xl","mx-auto"],[3,"playlist"],[1,"grid","grid-cols-1","md:grid-cols-2","lg:grid-cols-3","gap-4"],[1,"bg-white","rounded-xl","shadow","animate-pulse"],[1,"h-48","bg-gray-200","rounded-t-xl"],[1,"p-5","space-y-4"],[1,"h-4","bg-gray-200","rounded","w-3/4"],[1,"grid","grid-cols-2","gap-3"],[1,"h-12","bg-gray-100","rounded-lg"],[1,"bg-red-50","border","border-red-200","rounded-xl","p-6","text-center"],[1,"material-icons","text-red-500","text-4xl","mb-2"],[1,"text-lg","font-medium","text-red-800","mb-2"],[1,"text-red-600","mb-4"],[1,"px-4","py-2","bg-red-100","text-red-700","rounded-lg","hover:bg-red-200","transition-colors",3,"click"],[1,"bg-white","rounded-xl","p-8","text-center"],[1,"material-icons","text-4xl","text-gray-400","mb-2"],[1,"text-lg","font-medium","text-gray-900","mb-1"],[1,"text-gray-500"],[3,"preview","edit","playlist"],[3,"onCreate","onCancel"],[3,"closeDialog","playlist"]],template:function(i,n){i&1&&(l(0,"div",0)(1,"div",1)(2,"div",2)(3,"div")(4,"h1",3),o(5,"Playlists"),a(),l(6,"p",4),o(7,"Create and manage your content playlists"),a()(),l(8,"div",5)(9,"div",6)(10,"input",7),z("ngModelChange",function(f){return Q(n.searchQuery,f)||(n.searchQuery=f),f}),a(),l(11,"span",8),o(12,"search"),a()(),l(13,"button",9),c("click",function(){return n.createPlaylist()}),l(14,"span",10),o(15,"add"),a(),o(16," Create Playlist "),a()()()(),y(17,vt,4,1,"div",11)(18,wt,10,1,"div",11)(19,Tt,2,1)(20,It,1,0,"app-create-playlist-dialog")(21,Mt,1,1,"app-playlist-preview-dialog",12),a()),i&2&&(r(10),U("ngModel",n.searchQuery),r(7),p(n.loading?17:-1),r(),p(n.error?18:-1),r(),p(!n.loading&&!n.error?19:-1),r(),p(n.showCreateDialog?20:-1),r(),p(n.showPreviewDialog&&n.selectedPlaylist?21:-1))},dependencies:[S,tt,F,k,H,M,at,ot,it],encapsulation:2})}}return e})();export{te as PlaylistsComponent};
